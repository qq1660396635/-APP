éœ€æ±‚    çˆ¬å–91è§†é¢‘ å­¦ä¹ ç½‘ç«™
ä¿®æ”¹    è¾“å…¥åœ°å€ã€‚ä¿å­˜ç›®å½•åœ°å€ã€‚  ã€Œè§†é¢‘åœ°å€å¯ä»¥åœ¨æºç ä¸­è·å¾—ã€‚ã€
æœªå®Œæˆ  æ²¡æœ‰é’ˆå¯¹ä¸‹è½½é€Ÿåº¦ä¼˜åŒ–ï¼Œæ²¡æœ‰å¯¹è§‚çœ‹é™é¢è¿›è¡Œä¼˜åŒ–ï¼Œ   æ²¡æœ‰æ›´æ¢å…¬ç½‘IPï¼Œæ¢æºç­‰

ä¸€.  æºç 
ffmpeg -loglevel error -stats -progress pipe:1 \
  -user_agent "Mozilla/5.0 (Linux; Android 10; SM-G973F) AppleWebKit/537.36" \
  -i "è§†é¢‘ç½‘ç«™åœ°å€ï¼Œ18ï¼‹æ•™å­¦è§†é¢‘ï¼Œæœªæˆå¹´äººä¸å¯è§‚çœ‹ã€Œè¾“å…¥ä½ è‡ªå·±çš„åœ°å€ğŸ’ŠğŸ’ŠğŸ’Šã€" \
  -c copy \
  "/storage/emulated/0/Download/OnePlus Share/GITHUB å¼€æºé¡¹ç›®/é¡¹ç›®01/è„šæœ¬/2025-ouikk-4.mp4" 2>&1 | \
awk -F'=' '/^progress=end/ {print; fflush(); exit}
           /^progress=/    {print; fflush()}
           /^size=|^time=/ {printf "%s  ", $0; fflush()}' | \
while read -r line; do echo "$(date '+%H:%M:%S')  $line"; sleep 10; done


äºŒ.   ä»£ç è§£æ
ffmpeg -loglevel error -stats -progress pipe:1 \
# ffmpeg: å¤šåª’ä½“å¤„ç†å·¥å…·
# -loglevel error: åªæ˜¾ç¤ºé”™è¯¯æ—¥å¿—ï¼ˆerrorçº§åˆ«ï¼‰
# -stats: æ˜¾ç¤ºç¼–ç ç»Ÿè®¡ä¿¡æ¯
# -progress pipe:1: å°†è¿›åº¦ä¿¡æ¯è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºï¼ˆç®¡é“1ï¼‰
# \: è¡Œç»­æ¥ç¬¦ï¼Œè¡¨ç¤ºå‘½ä»¤ç»§ç»­åˆ°ä¸‹ä¸€è¡Œ

  -user_agent "Mozilla/5.0 (Linux; Android 10; SM-G973F) AppleWebKit/537.36" \
  # -user_agent: è®¾ç½®HTTPè¯·æ±‚çš„User-Agentå¤´éƒ¨
  # "Mozilla/...": æ¨¡æ‹ŸAndroidè®¾å¤‡çš„æµè§ˆå™¨æ ‡è¯†
  # \: è¡Œç»­æ¥ç¬¦

  -i "è§†é¢‘ç½‘ç«™åœ°å€ï¼Œ18ï¼‹æ•™å­¦è§†é¢‘ï¼Œæœªæˆå¹´äººä¸å¯è§‚çœ‹ã€Œè¾“å…¥ä½ è‡ªå·±çš„åœ°å€ğŸ’ŠğŸ’ŠğŸ’Š    " \
  # -i: æŒ‡å®šè¾“å…¥æ–‡ä»¶/URL
  # "https://...": HLSè§†é¢‘æµçš„m3u8ç´¢å¼•æ–‡ä»¶åœ°å€
  # \: è¡Œç»­æ¥ç¬¦

  -c copy \
  # -c copy: æµå¤åˆ¶æ¨¡å¼ï¼ˆä¸é‡æ–°ç¼–ç ï¼Œç›´æ¥å¤åˆ¶åŸå§‹æµï¼‰
  # \: è¡Œç»­æ¥ç¬¦

  "/storage/emulated/0/Download/OnePlus Share/GITHUB å¼€æºé¡¹ç›®/é¡¹ç›®01/è„šæœ¬/2025-ouikk-4.mp4" 2>&1 | \
  # è¾“å‡ºæ–‡ä»¶è·¯å¾„ï¼ˆAndroidè®¾å¤‡å­˜å‚¨è·¯å¾„ï¼‰
  # 2>&1: å°†æ ‡å‡†é”™è¯¯(stderr)é‡å®šå‘åˆ°æ ‡å‡†è¾“å‡º(stdout)
  # |: ç®¡é“ç¬¦ï¼Œå°†å‰å‘½ä»¤è¾“å‡ºä½œä¸ºåå‘½ä»¤è¾“å…¥

awk -F'=' '/^progress=end/ {print; fflush(); exit}
           # awk: æ–‡æœ¬å¤„ç†å·¥å…·
           # -F'=': è®¾ç½®å­—æ®µåˆ†éš”ç¬¦ä¸ºç­‰å·(=)
           # /^progress=end/: åŒ¹é…ä»¥"progress=end"å¼€å¤´çš„è¡Œ
           # {print; fflush(); exit}: æ‰“å°è¯¥è¡Œï¼Œç«‹å³åˆ·æ–°ç¼“å†²åŒºï¼Œç„¶åé€€å‡ºawk

           /^progress=/    {print; fflush()}
           # /^progress=/: åŒ¹é…ä»¥"progress="å¼€å¤´çš„è¡Œï¼ˆä¸å«endï¼‰
           # {print; fflush()}: æ‰“å°è¯¥è¡Œå¹¶åˆ·æ–°ç¼“å†²åŒº

           /^size=|^time=/ {printf "%s  ", $0; fflush()}' | \
           # /^size=|^time=/: åŒ¹é…ä»¥"size="æˆ–"time="å¼€å¤´çš„è¡Œ
           # {printf "%s  ", $0}: æ‰“å°æ•´è¡Œå†…å®¹ï¼ˆæœ«å°¾åŠ ä¸¤ä¸ªç©ºæ ¼ï¼‰
           # fflush(): ç«‹å³åˆ·æ–°è¾“å‡ºç¼“å†²åŒº
           # |: ç®¡é“ç¬¦

while read -r line; do echo "$(date '+%H:%M:%S')  $line"; sleep 10; done
# while read -r line: é€è¡Œè¯»å–è¾“å…¥ï¼ˆ-ré˜²æ­¢åæ–œæ è½¬ä¹‰ï¼‰
# do...done: å¾ªç¯ä½“å¼€å§‹/ç»“æŸ
# echo "$(date '+%H:%M:%S')  $line": æ‰“å°å½“å‰æ—¶é—´(æ—¶:åˆ†:ç§’) + è¡Œå†…å®¹
# sleep 10: æ¯æ¬¡å¾ªç¯æš‚åœ10ç§’ï¼ˆæ§åˆ¶è¾“å‡ºé¢‘ç‡ï¼‰

